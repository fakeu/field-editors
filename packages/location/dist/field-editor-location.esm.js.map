{"version":3,"file":"field-editor-location.esm.js","sources":["../src/types.ts","../src/LocationSearchInput.tsx","../src/LocationSelector.tsx","../src/GoogleMapView.tsx","../src/LocationEditor.tsx","../src/index.tsx"],"sourcesContent":["export { Coords } from 'google-map-react';\n\nexport type LocationValue = { lat: number; lon: number };\nexport type NullableLocationValue = LocationValue | null | undefined;\n\nexport enum ViewType {\n  Address = 'Address',\n  Coordinates = 'Coordinates',\n}\n\nexport type GeocodeApiResponse = null | Array<{\n  formatted_address: string;\n  geometry: {\n    location: {\n      lat: () => number;\n      lng: () => number;\n    };\n  };\n}>;\n","import React from 'react';\nimport { css } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\nimport { Button, Card } from '@contentful/f36-components';\nimport { Coords, GeocodeApiResponse } from './types';\n\nimport { Spinner, ValidationMessage, TextInput } from '@contentful/f36-components';\n\nconst styles = {\n  root: css({\n    width: '100%',\n  }),\n  input: css({\n    position: 'relative',\n    width: '100%',\n  }),\n  spinner: css({\n    position: 'absolute',\n    right: 10,\n    top: 10,\n    zIndex: 99,\n  }),\n  validationMessage: css({\n    marginTop: tokens.spacingS,\n  }),\n  suggestion: css({\n    position: 'absolute',\n    transform: 'translateY(100%)',\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n  }),\n};\n\ntype LocationSearchInputProps = {\n  disabled: boolean;\n  value?: Coords;\n  onSearchAddress: (term: string) => Promise<GeocodeApiResponse>;\n  onGetAddressFromLocation: (coors: Coords | undefined, value: string) => Promise<string>;\n  onChangeLocation: (location?: Coords) => void;\n};\n\nexport function LocationSearchInput(props: LocationSearchInputProps) {\n  const [isSearching, setIsSearching] = React.useState<boolean>(false);\n  const [address, setAddress] = React.useState<string>('');\n  const [hasError, setHasError] = React.useState<boolean>(false);\n  const [suggestion, setSuggestion] =\n    React.useState<null | {\n      address: string;\n      location: { lat: number; lng: number };\n    }>(null);\n\n  React.useEffect(() => {\n    setIsSearching(true);\n    props.onGetAddressFromLocation(props.value, address).then((address) => {\n      setAddress(address);\n      setIsSearching(false);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- TODO: Evaluate the dependencies\n  }, [props.value, props.disabled]);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.input}>\n        <TextInput\n          testId=\"location-editor-search\"\n          isInvalid={hasError}\n          placeholder=\"Start typing to find location\"\n          value={address}\n          onChange={(e) => {\n            setAddress(e.target.value);\n            setHasError(false);\n            setSuggestion(null);\n\n            if (e.target.value === '') {\n              props.onChangeLocation(undefined);\n              return;\n            }\n\n            setIsSearching(true);\n            props.onSearchAddress(e.target.value).then((value) => {\n              setIsSearching(false);\n              if (value === null) {\n                setHasError(false);\n              } else if (value.length === 0) {\n                setHasError(true);\n              } else {\n                setHasError(false);\n                setSuggestion({\n                  address: value[0].formatted_address,\n                  location: {\n                    lat: Number(value[0].geometry.location.lat().toString().slice(0, 8)),\n                    lng: Number(value[0].geometry.location.lng().toString().slice(0, 8)),\n                  },\n                });\n              }\n            });\n          }}\n          isDisabled={props.disabled}\n        />\n        {isSearching && <Spinner className={styles.spinner} />}\n        {suggestion && (\n          <Card padding=\"none\" className={styles.suggestion}>\n            <Button\n              variant=\"transparent\"\n              testId=\"location-editor-suggestion\"\n              onClick={() => {\n                setAddress(suggestion.address);\n                props.onChangeLocation(suggestion.location);\n                setSuggestion(null);\n              }}>\n              {suggestion.address}\n            </Button>\n          </Card>\n        )}\n        {hasError && (\n          <ValidationMessage\n            testId=\"location-editor-not-found\"\n            className={styles.validationMessage}>\n            No results found for <strong>{address}</strong>. Please make sure that address is\n            spelled correctly.\n          </ValidationMessage>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { css } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\nimport { LocationSearchInput } from './LocationSearchInput';\n\nimport { Coords, ViewType, GeocodeApiResponse } from './types';\n\nimport { TextLink, TextInput, Radio, Flex } from '@contentful/f36-components';\n\ninterface LocationSelectorProps {\n  disabled: boolean;\n  value: Coords | undefined;\n  view: ViewType;\n  onChangeView: (view: ViewType) => void;\n  onChangeLocation: (value?: Coords) => void;\n  onSearchAddress: (value: string) => Promise<GeocodeApiResponse>;\n  onGetAddressFromLocation: (location: Coords | undefined, address: string) => Promise<string>;\n}\n\nconst styles = {\n  root: css({\n    display: 'flex',\n    flexDirection: 'row',\n    marginTop: tokens.spacingS,\n    alignItems: 'flex-end',\n  }),\n  main: css({\n    flexGrow: 1,\n  }),\n  secondary: css({\n    minWidth: '70px',\n    textAlign: 'right',\n  }),\n  inputsRow: css({\n    display: 'flex',\n    marginTop: tokens.spacingS,\n    fontSize: tokens.fontSizeM,\n    color: tokens.gray900,\n    fontFamily: tokens.fontStackPrimary,\n    alignItems: 'center',\n  }),\n  splitter: css({\n    width: tokens.spacingL,\n  }),\n  clearBtn: css({\n    marginBottom: tokens.spacingS,\n  }),\n};\n\nexport function LocationSelector(props: LocationSelectorProps) {\n  return (\n    <div className={styles.root}>\n      <div className={styles.main}>\n        <Flex flexDirection=\"row\">\n          <Radio\n            className={css({ flexBasis: '100%' })}\n            id={ViewType.Address}\n            testId=\"location-editor-address-radio\"\n            isDisabled={props.disabled}\n            value={ViewType.Address}\n            isChecked={props.view === ViewType.Address}\n            onChange={() => {\n              props.onChangeView(ViewType.Address);\n            }}>\n            Address\n          </Radio>\n          <Radio\n            className={css({ flexBasis: '100%' })}\n            id={ViewType.Coordinates}\n            testId=\"location-editor-coordinates-radio\"\n            isDisabled={props.disabled}\n            value={ViewType.Coordinates}\n            isChecked={props.view === ViewType.Coordinates}\n            onChange={() => {\n              props.onChangeView(ViewType.Coordinates);\n            }}>\n            Coordinates\n          </Radio>\n        </Flex>\n        {props.view === ViewType.Address && (\n          <div className={styles.inputsRow}>\n            <LocationSearchInput\n              onSearchAddress={props.onSearchAddress}\n              onGetAddressFromLocation={props.onGetAddressFromLocation}\n              disabled={props.disabled}\n              value={props.value}\n              onChangeLocation={props.onChangeLocation}\n            />\n          </div>\n        )}\n        {props.view === ViewType.Coordinates && (\n          <div className={styles.inputsRow}>\n            <label htmlFor=\"latitude\">Latitude</label>\n            <div className={styles.splitter} />\n            <TextInput\n              id=\"latitude\"\n              testId=\"location-editor-latitude\"\n              placeholder=\"Between -90 and 90\"\n              isDisabled={props.disabled}\n              value={props.value ? String(props.value.lat) : ''}\n              onChange={(e) => {\n                props.onChangeLocation({\n                  lng: props.value && props.value.lng !== undefined ? props.value.lng : 0,\n                  lat: Number(e.target.value) || 0,\n                });\n              }}\n              type=\"number\"\n              max=\"90\"\n              min=\"-90\"\n              step=\"0.1\"\n            />\n            <div className={styles.splitter} />\n            <label htmlFor=\"longitude\">Longitude</label>\n            <div className={styles.splitter} />\n            <TextInput\n              id=\"longitude\"\n              testId=\"location-editor-longitude\"\n              placeholder=\"Between -180 and 180\"\n              isDisabled={props.disabled}\n              value={props.value ? String(props.value.lng) : ''}\n              onChange={(e) => {\n                props.onChangeLocation({\n                  lat: props.value && props.value.lat !== undefined ? props.value.lat : 0,\n                  lng: Number(e.target.value) || 0,\n                });\n              }}\n              type=\"number\"\n              max=\"180\"\n              min=\"-180\"\n              step=\"0.1\"\n            />\n          </div>\n        )}\n      </div>\n      <div className={styles.secondary}>\n        <TextLink\n          as=\"button\"\n          isDisabled={props.disabled}\n          testId=\"location-editor-clear\"\n          className={styles.clearBtn}\n          onClick={() => {\n            props.onChangeLocation(undefined);\n          }}>\n          Clear\n        </TextLink>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport React from 'react';\nimport { css } from 'emotion';\nimport GoogleMapReact from 'google-map-react';\nimport { Coords } from './types';\n\nconst styles = {\n  root: css({\n    height: '300px',\n    width: '100%',\n  }),\n};\n\nconst BerlinLocation = {\n  lat: 52.5018,\n  lng: 13.41115439,\n};\n\ntype GoogleMapViewProps = {\n  disabled: boolean;\n  location: Coords | undefined;\n  onGoogleApiLoaded: ({ maps }: { maps: any }) => void;\n  onChangeLocation: (location: Coords) => void;\n  googleMapsKey?: string;\n};\n\ntype GoogleMapsViewState = {\n  marker: any;\n  maps: any;\n};\n\nexport class GoogleMapView extends React.Component<GoogleMapViewProps, GoogleMapsViewState> {\n  constructor(props: GoogleMapViewProps) {\n    super(props);\n    this.state = {\n      marker: undefined,\n      maps: undefined,\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.marker && this.state.maps) {\n      if (this.props.location) {\n        const latLng = new this.state.maps.LatLng(this.props.location.lat, this.props.location.lng);\n        this.state.marker.setPosition(latLng);\n        this.state.marker.setVisible(true);\n      } else {\n        this.state.marker.setVisible(false);\n      }\n      this.state.marker.setDraggable(!this.props.disabled);\n      this.state.marker.setCursor(this.props.disabled ? 'not-allowed' : 'auto');\n    }\n  }\n\n  onGoogleApiLoaded = (event: { maps: any; map: any }) => {\n    const { maps, map } = event;\n    const marker = new maps.Marker({\n      map,\n      position: map.getCenter(),\n      cursor: this.props.disabled ? 'not-allowed' : 'auto',\n      draggable: !this.props.disabled,\n      visible: Boolean(this.props.location),\n    });\n\n    maps.event.addListener(map, 'click', (event: any) => {\n      if (this.props.disabled || !this.state.marker || !this.state.maps) {\n        return;\n      }\n      this.state.marker.setPosition(event.latLng);\n      this.state.marker.setVisible(true);\n      this.props.onChangeLocation({\n        lat: event.latLng.lat(),\n        lng: event.latLng.lng(),\n      });\n    });\n\n    maps.event.addListener(marker, 'dragend', (event: any) => {\n      this.props.onChangeLocation({\n        lat: event.latLng.lat(),\n        lng: event.latLng.lng(),\n      });\n    });\n    this.setState({ marker, maps }, () => {\n      this.props.onGoogleApiLoaded({ maps });\n    });\n  };\n\n  render() {\n    return (\n      <div className={styles.root}>\n        <GoogleMapReact\n          draggable={!this.props.disabled}\n          bootstrapURLKeys={\n            this.props.googleMapsKey ? { key: this.props.googleMapsKey } : undefined\n          }\n          defaultCenter={BerlinLocation}\n          center={this.props.location}\n          options={{\n            scrollwheel: false,\n            mapTypeId: 'roadmap',\n          }}\n          defaultZoom={6}\n          yesIWantToUseGoogleMapApiInternals\n          onGoogleApiLoaded={this.onGoogleApiLoaded}\n        />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport isNumber from 'lodash/isNumber';\nimport throttle from 'lodash/throttle';\nimport { FieldAPI, FieldConnector, ParametersAPI } from '@contentful/field-editor-shared';\nimport deepEqual from 'deep-equal';\nimport {\n  LocationValue,\n  ViewType,\n  NullableLocationValue,\n  Coords,\n  GeocodeApiResponse,\n} from './types';\nimport { LocationSelector } from './LocationSelector';\nimport { GoogleMapView } from './GoogleMapView';\n\nexport interface LocationEditorConnectedProps {\n  /**\n   * is the field disabled initially\n   */\n  isInitiallyDisabled: boolean;\n\n  /**\n   * sdk.field\n   */\n  field: FieldAPI;\n\n  /**\n   * sdk.parameters\n   */\n  parameters?: ParametersAPI & {\n    instance: {\n      googleMapsKey?: string;\n    };\n  };\n}\n\ntype LocationEditorProps = {\n  disabled: boolean;\n  value: NullableLocationValue;\n  setValue: (value: NullableLocationValue) => void;\n  googleMapsKey?: string;\n  selectedView: ViewType;\n  setSelectedView: (view: ViewType) => void;\n};\n\nfunction toLocationValue(coords?: Coords): NullableLocationValue {\n  if (coords && isNumber(coords.lat) && isNumber(coords.lng)) {\n    return { lat: coords.lat, lon: coords.lng };\n  } else {\n    return null;\n  }\n}\n\nexport class LocationEditor extends React.Component<\n  LocationEditorProps,\n  {\n    localValue?: Coords;\n    mapsObject: any; // eslint-disable-line -- TODO: describe this disable  @typescript-eslint/no-explicit-any\n  }\n> {\n  constructor(props: LocationEditorProps) {\n    super(props);\n\n    this.state = {\n      localValue: props.value\n        ? {\n            lng: props.value.lon,\n            lat: props.value.lat,\n          }\n        : undefined,\n      mapsObject: null,\n    };\n  }\n\n  // @ts-expect-error\n  onSearchAddress: (value: string) => Promise<GeocodeApiResponse> = throttle((value) => {\n    if (!this.state.mapsObject) {\n      return Promise.resolve(null);\n    }\n    const { mapsObject } = this.state;\n    if (!value) {\n      return Promise.resolve(null);\n    }\n    return new Promise((resolve) => {\n      const geocoder = new mapsObject.Geocoder();\n      geocoder.geocode({ address: value }, resolve, () => {\n        resolve(null);\n      });\n    });\n  }, 300);\n\n  onGetAddressFromLocation = (location: Coords | undefined, value: string): Promise<string> => {\n    if (!this.state.mapsObject || !location) {\n      return Promise.resolve('');\n    }\n    const { mapsObject } = this.state;\n    return new Promise((resolve) => {\n      const geocoder = new mapsObject.Geocoder();\n      geocoder.geocode(\n        { location },\n        (result: GeocodeApiResponse) => {\n          if (result && result.length > 0) {\n            const addresses = result.map((item) => item.formatted_address);\n            resolve(addresses.find((item) => item === value) || addresses[0]);\n          } else {\n            resolve('');\n          }\n        },\n        () => {\n          resolve('');\n        }\n      );\n    });\n  };\n\n  render() {\n    const { mapsObject, localValue } = this.state;\n\n    return (\n      <div data-test-id=\"location-editor\">\n        <GoogleMapView\n          disabled={this.props.disabled || mapsObject === null}\n          googleMapsKey={this.props.googleMapsKey}\n          location={localValue}\n          onGoogleApiLoaded={({ maps }) => {\n            this.setState({ mapsObject: maps });\n          }}\n          onChangeLocation={(coords) => {\n            this.setState({ localValue: coords });\n            this.props.setValue(toLocationValue(coords));\n          }}\n        />\n        <LocationSelector\n          disabled={this.props.disabled || mapsObject === null}\n          value={localValue}\n          view={this.props.selectedView}\n          onChangeView={(view) => {\n            this.props.setSelectedView(view);\n          }}\n          onChangeLocation={(coords) => {\n            this.setState({ localValue: coords });\n            this.props.setValue(toLocationValue(coords));\n          }}\n          onSearchAddress={this.onSearchAddress}\n          onGetAddressFromLocation={this.onGetAddressFromLocation}\n        />\n      </div>\n    );\n  }\n}\n\nexport function LocationEditorConnected(props: LocationEditorConnectedProps) {\n  const { field } = props;\n  const googleMapsKey = props.parameters ? props.parameters.instance.googleMapsKey : undefined;\n  const [selectedView, setSelectedView] = React.useState<ViewType>(ViewType.Address);\n\n  return (\n    <FieldConnector<LocationValue>\n      isEqualValues={(value1, value2) => {\n        return deepEqual(value1, value2);\n      }}\n      field={field}\n      isInitiallyDisabled={props.isInitiallyDisabled}>\n      {({ value, disabled, setValue, externalReset }) => {\n        return (\n          <LocationEditor\n            // on external change reset component completely and init with initial value again\n            key={`location-editor-${externalReset}`}\n            value={value}\n            disabled={disabled}\n            setValue={setValue}\n            googleMapsKey={googleMapsKey}\n            selectedView={selectedView}\n            setSelectedView={setSelectedView}\n          />\n        );\n      }}\n    </FieldConnector>\n  );\n}\n\nLocationEditorConnected.defaultProps = {\n  isInitiallyDisabled: true,\n};\n","import { LocationEditorConnected } from './LocationEditor';\n\nexport const LocationEditor = LocationEditorConnected;\n"],"names":["ViewType","styles","root","css","width","input","position","spinner","right","top","zIndex","validationMessage","marginTop","tokens","spacingS","suggestion","transform","bottom","left","LocationSearchInput","props","React","useState","isSearching","setIsSearching","address","setAddress","hasError","setHasError","setSuggestion","useEffect","onGetAddressFromLocation","value","then","disabled","className","TextInput","testId","isInvalid","placeholder","onChange","e","target","onChangeLocation","undefined","onSearchAddress","length","formatted_address","location","lat","Number","geometry","toString","slice","lng","isDisabled","Spinner","Card","padding","Button","variant","onClick","ValidationMessage","display","flexDirection","alignItems","main","flexGrow","secondary","minWidth","textAlign","inputsRow","fontSize","fontSizeM","color","gray900","fontFamily","fontStackPrimary","splitter","spacingL","clearBtn","marginBottom","LocationSelector","Flex","Radio","flexBasis","id","Address","isChecked","view","onChangeView","Coordinates","htmlFor","String","type","max","min","step","TextLink","as","height","BerlinLocation","GoogleMapView","onGoogleApiLoaded","event","maps","map","marker","Marker","getCenter","cursor","draggable","visible","Boolean","addListener","state","setPosition","latLng","setVisible","setState","componentDidUpdate","LatLng","setDraggable","setCursor","render","GoogleMapReact","bootstrapURLKeys","googleMapsKey","key","defaultCenter","center","options","scrollwheel","mapTypeId","defaultZoom","yesIWantToUseGoogleMapApiInternals","Component","toLocationValue","coords","isNumber","lon","LocationEditor","throttle","mapsObject","Promise","resolve","geocoder","Geocoder","geocode","result","addresses","item","find","localValue","setValue","selectedView","setSelectedView","LocationEditorConnected","field","parameters","instance","FieldConnector","isEqualValues","value1","value2","deepEqual","isInitiallyDisabled","externalReset","defaultProps"],"mappings":"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"}