{"version":3,"file":"field-editor-test-utils.cjs.development.js","sources":["../src/createFakeCMAAdapter.ts","../src/createFakeFieldAPI.ts","../src/createFakeLocalesAPI.ts","../src/fakesFactory.ts","../src/createFakeSpaceAPI.ts","../src/createFakeNavigatorAPI.ts","../src/ActionsPlayground.tsx"],"sourcesContent":["import { Adapter, MRActions, MROpts } from 'contentful-management';\nimport { Except, PartialDeep } from 'type-fest';\n\ntype Options<ET extends keyof MRActions, A extends keyof MRActions[ET]> = Except<\n  MROpts<ET, A>,\n  'entityType' | 'action'\n>;\ntype Params<ET extends keyof MRActions, A extends keyof MRActions[ET]> =\n  'params' extends keyof Options<ET, A> ? Options<ET, A>['params'] : {};\ntype Return<ET extends keyof MRActions, Action extends keyof MRActions[ET]> =\n  'return' extends keyof MRActions[ET][Action]\n    ? Promise<PartialDeep<MRActions[ET][Action]['return']>>\n    : never;\n\ntype Overrides = PartialDeep<\n  {\n    [EntityType in keyof MRActions]: {\n      [Action in keyof MRActions[EntityType]]: (\n        params: Params<EntityType, Action>\n      ) => Return<EntityType, Action>;\n    };\n  }\n>;\n\nexport function createFakeCMAAdapter(overrides?: Overrides) {\n  function makeRequest({\n    entityType,\n    action,\n    params,\n  }: {\n    entityType: string;\n    action: string;\n    params: unknown;\n  }) {\n    return (\n      // @ts-expect-error\n      overrides?.[entityType]?.[action]?.(params) ??\n      Promise.reject(`Override for ${entityType}.${action} is not defined`)\n    );\n  }\n\n  return { makeRequest } as Adapter;\n}\n","import mitt from 'mitt';\nimport type { Emitter, Handler } from 'mitt';\nimport { FieldAPI } from '@contentful/app-sdk';\n\nfunction identity<T>(item: T): T {\n  return item;\n}\n\ntype CustomizeMockFn = (fieldApi: FieldAPI) => FieldAPI;\n\nexport function createFakeFieldAPI<T>(\n  customizeMock: CustomizeMockFn = identity,\n  initialValue?: T\n): [FieldAPI, Emitter] {\n  const emitter: Emitter = mitt();\n\n  // eslint-disable-next-line -- TODO: describe this disable\n  let _value: any = initialValue;\n\n  return [\n    customizeMock({\n      id: 'fake-id',\n      locale: 'en-US',\n      type: 'Symbol',\n      validations: [],\n      required: false,\n      onValueChanged: (...args: [string, Function] | [Function]) => {\n        let fn: Function;\n        if (typeof args[0] === 'string') {\n          fn = args[1] as Function;\n        } else {\n          fn = args[0];\n        }\n        emitter.on('onValueChanged', fn as Handler);\n        return () => {\n          emitter.off('onValueChanged', fn as Handler);\n        };\n      },\n      onIsDisabledChanged: (fn: Function) => {\n        emitter.on('onIsDisabledChanged', fn as Handler);\n        return () => {\n          emitter.off('onIsDisabledChanged', fn as Handler);\n        };\n      },\n      onSchemaErrorsChanged: (fn: Function) => {\n        emitter.on('onSchemaErrorsChanged', fn as Handler);\n        return () => {\n          emitter.off('onSchemaErrorsChanged', fn as Handler);\n        };\n      },\n      getValue: () => {\n        emitter.emit('getValue');\n        return _value;\n      },\n      setInvalid: () => {\n        emitter.emit('setInvalid');\n      },\n      setValue: (value) => {\n        _value = value;\n        emitter.emit('setValue', _value);\n        emitter.emit('onValueChanged', _value);\n        return Promise.resolve(undefined);\n      },\n      removeValue: () => {\n        _value = undefined;\n        emitter.emit('removeValue');\n        emitter.emit('onValueChanged', undefined);\n        return Promise.resolve();\n      },\n    }),\n    emitter,\n  ];\n}\n","import { LocalesAPI } from '@contentful/app-sdk';\n\nfunction identity<T>(item: T): T {\n  return item;\n}\n\ntype CustomizeMockFn = (fieldApi: LocalesAPI) => LocalesAPI;\n\nexport function createFakeLocalesAPI(customizeMock: CustomizeMockFn = identity): LocalesAPI {\n  return customizeMock({\n    default: 'en-US',\n    available: ['en-US', 'de-DE'],\n    fallbacks: {\n      'en-US': undefined,\n      'de-DE': undefined,\n    },\n    names: {\n      'en-US': 'English',\n      'de-DE': 'Deutsch',\n    },\n    optional: {\n      'en-US': false,\n      'de-DE': false,\n    },\n    direction: {\n      'en-US': 'ltr',\n      'de-DE': 'ltr',\n    },\n  } as unknown as LocalesAPI);\n}\n","import { Entry } from '@contentful/field-editor-shared';\n\ninterface Fields {\n  [key: string]: {\n    // eslint-disable-next-line -- TODO: describe this disable  @typescript-eslint/no-explicit-any\n    [localeKey: string]: any;\n  };\n}\n\nexport const createEntry = (contentTypeId: string, fields: Fields): Entry => ({\n  fields,\n  sys: {\n    id: `entry-${Math.round(Math.random() * 1000)}`,\n    type: 'Entry',\n    space: { sys: { id: 'space', type: 'Link', linkType: 'Space' } },\n    environment: { sys: { id: 'e123', type: 'Link', linkType: 'Environment' } },\n    version: 2,\n    publishedVersion: 2,\n    publishedCounter: 1,\n    createdAt: '2020-02-15T17:41:01.000Z',\n    updatedAt: '2020-02-17T20:20:01.000Z',\n    publishedAt: '2020-02-18T17:41:01.000Z',\n    firstPublishedAt: '2020-02-18T17:41:01.000Z',\n    createdBy: { sys: { id: 'u123', type: 'Link', linkType: 'User' } },\n    updatedBy: { sys: { id: 'u123', type: 'Link', linkType: 'User' } },\n    publishedBy: { sys: { id: 'u123', type: 'Link', linkType: 'User' } },\n    contentType: { sys: { id: contentTypeId, type: 'Link', linkType: 'ContentType' } },\n  },\n  metadata: {\n    tags: [],\n  },\n});\n","import { ContentType, SearchQuery, SpaceAPI } from '@contentful/app-sdk';\nimport { Entry } from '@contentful/field-editor-shared';\n\nimport { createEntry } from './fakesFactory';\n\nfunction identity<T>(item: T): T {\n  return item;\n}\n\ntype CustomizeMockFn = (api: SpaceAPI) => SpaceAPI;\n\nconst testContentTypes: ContentType[] = [\n  {\n    name: 'Example Content Type',\n    sys: {\n      id: 'exampleCT',\n      type: 'ContentType',\n      space: { sys: { id: 'space', type: 'link', linkType: 'Space' } },\n      environment: { sys: { id: 'env', type: 'link', linkType: 'Environment' } },\n      version: 1,\n      createdAt: '2020-08-11T09:30:29.326Z',\n      updatedAt: '2020-08-11T09:30:29.326Z',\n    },\n    fields: [\n      {\n        id: 'exField',\n        disabled: false,\n        localized: false,\n        name: 'Example Field',\n        omitted: false,\n        required: true,\n        type: 'Symbol',\n        validations: [],\n      },\n      {\n        id: 'exDesc',\n        disabled: false,\n        localized: false,\n        name: 'Description Field',\n        omitted: false,\n        required: false,\n        type: 'Text',\n        validations: [],\n      },\n    ],\n    displayField: 'exField',\n    description: '',\n  },\n  {\n    name: 'Another Content Type',\n    sys: {\n      id: 'anotherCT',\n      type: 'ContentType',\n      space: { sys: { id: 'space', type: 'link', linkType: 'Space' } },\n      environment: { sys: { id: 'env', type: 'link', linkType: 'Environment' } },\n      version: 1,\n      createdAt: '2020-08-11T09:30:29.326Z',\n      updatedAt: '2020-08-11T09:30:29.326Z',\n    },\n    fields: [],\n    displayField: '',\n    description: '',\n  },\n];\n\nexport function createFakeSpaceAPI(customizeMock: CustomizeMockFn = identity): SpaceAPI {\n  return customizeMock({\n    getCachedContentTypes() {\n      return testContentTypes;\n    },\n    getContentTypes() {\n      return Promise.resolve({\n        items: testContentTypes,\n        total: testContentTypes.length,\n        skip: 0,\n        limit: 100,\n        sys: { type: 'Array' },\n      });\n    },\n    getEntries(query?: SearchQuery) {\n      const items: Entry[] = [\n        createEntry('exampleCT', { exField: { 'en-US': 'Hello world' } }),\n        createEntry('exampleCT', {}),\n      ];\n      return Promise.resolve({\n        items: !query || query.content_type === 'exampleCT' ? items : [],\n        total: items.length,\n        skip: 0,\n        limit: 100,\n        sys: { type: 'Array' },\n      });\n    },\n    getAssets() {\n      return Promise.resolve({\n        items: [],\n        total: 0,\n        skip: 0,\n        limit: 100,\n        sys: { type: 'Array' },\n      });\n    },\n    createEntry(contentTypeId: string) {\n      return Promise.resolve(createEntry(contentTypeId, {}));\n    },\n    createAsset() {\n      return Promise.resolve({});\n    },\n  } as unknown as SpaceAPI);\n}\n","export function createFakeNavigatorAPI() {\n  return {\n    openEntry(entryId: string) {\n      window.alert(`Open entry ${entryId}`);\n    },\n    openAsset(assetId: string) {\n      window.alert(`Open asset ${assetId}`);\n    },\n  };\n}\n","import React from 'react';\nimport type { Emitter } from 'mitt';\nimport { css } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\n\ntype EventDefinition = { type?: string; value: any; id: number };\n\ntype ActionsPlaygroundProps = {\n  mitt: Emitter;\n  renderValue: Function;\n};\n\ntype ActionPlaygroundState = {\n  events: EventDefinition[];\n};\n\ntype AddActions = { type: 'add'; payload: { type?: string; value: any } };\ntype Actions = AddActions;\n\nfunction reducer(state: ActionPlaygroundState, action: Actions): ActionPlaygroundState {\n  if (action.type === 'add') {\n    return {\n      ...state,\n      events: [\n        {\n          id: state.events.length + 1,\n          type: action.payload.type,\n          value: action.payload.value,\n        },\n        ...state.events,\n      ],\n    };\n  }\n  return state;\n}\n\nfunction ActionsPlayground(props: ActionsPlaygroundProps) {\n  const [state, dispatch] = React.useReducer(reducer, { events: [] });\n\n  const onLog = (type?: string, event?: any) => {\n    dispatch({\n      type: 'add',\n      payload: {\n        type,\n        value: event,\n      },\n    });\n  };\n\n  React.useEffect(() => {\n    props.mitt.on('*', onLog);\n\n    if ((window as any).Cypress) {\n      (window as any).editorEvents = [];\n      (window as any).setValueExternal = (value: any) => {\n        props.mitt.emit('onValueChanged', value);\n      };\n    }\n\n    return () => {\n      props.mitt.off('*', onLog);\n      (window as any).editorEvents = undefined;\n      (window as any).setValueExternal = undefined;\n    };\n  }, [props.mitt]);\n\n  React.useEffect(() => {\n    (window as any).editorEvents = [...state.events];\n  }, [props, state.events]);\n\n  return (\n    <div\n      className={css({\n        border: `1px solid ${tokens.gray200}`,\n        padding: tokens.spacingS,\n        marginTop: tokens.spacingXl,\n      })}>\n      <div\n        className={css({\n          height: 150,\n          overflowY: 'scroll',\n          fontSize: tokens.fontSizeM,\n        })}>\n        {state.events.map((log) => (\n          <div key={log.id}>\n            <div>\n              <code>\n                {log.id}. {log.type}\n              </code>\n            </div>\n            <div>{log.value ? props.renderValue(log.value, log.type) : <pre>undefined</pre>}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nActionsPlayground.defaultProps = {\n  renderValue: function JsonStringifiedValue(value: any) {\n    return <pre>{JSON.stringify(value, null, 2)}</pre>;\n  },\n};\n\nexport { ActionsPlayground };\n"],"names":["createFakeCMAAdapter","overrides","makeRequest","entityType","action","params","Promise","reject","identity","item","createFakeFieldAPI","customizeMock","initialValue","emitter","mitt","_value","id","locale","type","validations","required","onValueChanged","fn","on","off","onIsDisabledChanged","onSchemaErrorsChanged","getValue","emit","setInvalid","setValue","value","resolve","undefined","removeValue","createFakeLocalesAPI","available","fallbacks","names","optional","direction","createEntry","contentTypeId","fields","sys","Math","round","random","space","linkType","environment","version","publishedVersion","publishedCounter","createdAt","updatedAt","publishedAt","firstPublishedAt","createdBy","updatedBy","publishedBy","contentType","metadata","tags","testContentTypes","name","disabled","localized","omitted","displayField","description","createFakeSpaceAPI","getCachedContentTypes","getContentTypes","items","total","length","skip","limit","getEntries","query","exField","content_type","getAssets","createAsset","createFakeNavigatorAPI","openEntry","entryId","window","alert","openAsset","assetId","reducer","state","events","payload","ActionsPlayground","props","React","useReducer","dispatch","onLog","event","useEffect","Cypress","editorEvents","setValueExternal","className","css","border","tokens","gray200","padding","spacingS","marginTop","spacingXl","height","overflowY","fontSize","fontSizeM","map","log","key","renderValue","defaultProps","JsonStringifiedValue","JSON","stringify"],"mappings":"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"}