"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),a=e(require("lodash/isNumber")),i=require("@contentful/field-editor-shared"),r=e(require("lodash/noop")),l=require("emotion"),o=e(require("@contentful/f36-tokens")),s=require("@contentful/f36-components"),c=require("react-sortable-hoc"),d=e(require("array-move")),u=require("@contentful/f36-icons");function m(e){var t=e.constraintsType,a=e.constraints;return n.createElement(s.Text,{as:"p",fontColor:"gray600",marginBottom:"none",marginTop:"spacingS",className:l.css({fontStyle:"italic"}),testId:"tag-editor-constraints"},"min"===t&&n.createElement("span",null,"Requires at least ",a.min," ",1===a.min?"tag":"tags"),"max"===t&&n.createElement("span",null,"Requires no more than ",a.max," ",1===a.max?"tag":"tags"),"min-max"===t&&a.max!==a.min&&n.createElement("span",null,"Requires between ",a.min," and ",a.max," tags"),"min-max"===t&&a.max===a.min&&n.createElement("span",null,"Requires exactly ",a.max," ",1===a.max?"tag":"tags"))}var p={dropContainer:l.css({whiteSpace:"nowrap",display:"flex",flexWrap:"wrap"}),input:l.css({marginTop:o.spacingS,marginBottom:o.spacingM}),pill:l.css({marginRight:o.spacingS,marginBottom:o.spacingS}),pillDisabled:l.css({cursor:"not-allowed !important",button:{cursor:"not-allowed !important",pointerEvents:"none"}}),handle:l.css({lineHeight:"1.5rem",padding:"0.375rem 0.625rem",paddingRight:0,cursor:"grab",userSelect:"none",svg:{fill:o.gray500,verticalAlign:"middle"}})},f=c.SortableHandle((function(e){var t;return n.createElement("div",{className:l.cx(p.handle,(t={},t[p.pillDisabled]=e.isDisabled,t))},n.createElement(u.DragIcon,{variant:"muted"}))})),g=c.SortableElement((function(e){var t;return n.createElement(s.Pill,{testId:"tag-editor-pill",className:l.cx(p.pill,(t={},t[p.pillDisabled]=e.isSortablePillDisabled,t)),label:e.label,onClose:function(){e.isSortablePillDisabled||e.onRemove(e.index)},onDrag:r,dragHandleComponent:n.createElement(f,{isDisabled:e.isSortablePillDisabled})})})),b=c.SortableContainer((function(e){return n.createElement("div",{className:p.dropContainer},e.children)}));function x(e){var a=t.useState(""),i=a[0],r=a[1],l=e.isDisabled,o=e.items,c=e.constraints,u=e.constraintsType,f=e.hasError,x=t.useCallback((function(t){var n=e.items.filter((function(e,n){return t!==n}));e.onUpdate(n)}),[e]),v=t.useCallback((function(t){var n=d(e.items,t.oldIndex,t.newIndex);e.onUpdate(n)}),[e]);return n.createElement("div",{"data-test-id":"tag-editor-container"},n.createElement(s.TextInput,{testId:"tag-editor-input",className:p.input,isDisabled:l,isInvalid:f,type:"text",value:i,placeholder:"Type the value and hit enter",onKeyDown:function(t){i&&13===t.keyCode&&(e.onUpdate([].concat(e.items,[i])),r(""))},onChange:function(e){r(e.target.value)}}),n.createElement(b,{useDragHandle:!0,axis:"xy",distance:10,onSortEnd:function(e){v({oldIndex:e.oldIndex,newIndex:e.newIndex})}},o.map((function(e,t){return n.createElement(g,{label:e,index:t,key:e+t,disabled:l,isSortablePillDisabled:l,onRemove:function(){x(t)}})}))),c&&u&&n.createElement(m,{constraints:c,constraintsType:u}))}function v(e){return null===e||0===e.length}function E(e){var n=e.field,r=(n.validations||[]).filter((function(e){return e.size})).map((function(e){return e.size})),l=r.length>0?r[0]:{},o=function(e){if(e)return a(e.min)&&a(e.max)?"min-max":a(e.min)?"min":a(e.max)?"max":void 0}(l);return t.createElement(i.FieldConnector,{field:n,isInitiallyDisabled:e.isInitiallyDisabled,isEmptyValue:v,throttle:0},(function(e){var n=e.setValue;return t.createElement(x,{constraints:l,constraintsType:o,isDisabled:e.disabled,hasError:e.errors.length>0,items:e.value||[],onUpdate:function(e){n(e)}})}))}E.defaultProps={isInitiallyDisabled:!0},exports.TagsEditor=E;
//# sourceMappingURL=field-editor-tags.cjs.production.min.js.map
