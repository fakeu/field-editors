"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),a=require("emotion"),r=e(require("@contentful/f36-tokens")),l=require("@contentful/field-editor-shared"),i=require("@contentful/f36-components"),u=e(require("moment"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s={root:a.css({maxWidth:"270px"})},m=function(e){var a,r=t.useMemo((function(){var e=new Date;e.setFullYear(e.getFullYear()-100);var t=new Date;return t.setFullYear(t.getFullYear()+100),[e,t]}),[]),l=r[0],o=r[1],m=null==(a=e.value)?void 0:a.toObject(),c=m?new Date(m.years,m.months,m.date):void 0;return n.createElement(i.Datepicker,{className:s.root,selected:c,onSelect:function(t){var n=t?u(t):void 0;e.onChange(n)},inputProps:{isDisabled:e.disabled,placeholder:""},fromDate:l,toDate:o})},c=["hh:mm a","hh:mm A","h:mm a","h:mm A","hh:mm","k:mm","kk:mm","h a","h A","h","hh","HH"],d=function(){return u("12:00 AM","hh:mm A")},f=function(e,t){return t.format(e?"hh:mm A":"HH:mm")},v=function(e){var r=e.disabled,l=e.uses12hClock,o=e.time,s=void 0===o?"12:00":o,m=e.ampm,v=void 0===m?"AM":m,h=e.onChange,p=t.useState((function(){return f(l,d())})),b=p[0],g=p[1];t.useEffect((function(){g(f(l,u(s+" "+v,"hh:mm A")))}),[s,v,l]);var C=t.useCallback((function(e){g(e.currentTarget.value)}),[]),D=t.useCallback((function(e){e.preventDefault(),e.target.select()}),[]);return n.createElement(i.Flex,{className:a.css({width:"145px"})},n.createElement(i.TextInput,{"aria-label":"Select time",placeholder:l?"12:00 AM":"00:00","date-time-type":l?"12":"24",testId:"time-input",value:b,isDisabled:r,onFocus:D,onBlur:function(){var e=function(e){for(var t=null,n=0;n<c.length;n++){var a=u(e,c[n]);if(a.isValid()){t=a;break}}return t}(b),t=null!=e?e:d();g(f(l,t)),h({time:t.format("hh:mm"),ampm:t.format("A")})},onChange:C}))},h=["-12:00","-11:00","-10:00","-09:30","-09:00","-08:00","-07:00","-06:00","-05:00","-04:30","-04:00","-03:30","-03:00","-02:00","-01:00","+00:00","+01:00","+02:00","+03:00","+03:30","+04:00","+04:30","+05:00","+05:30","+05:45","+06:00","+06:30","+07:00","+08:00","+08:45","+09:00","+09:30","+10:00","+10:30","+11:00","+11:30","+12:00","+12:45","+13:00","+14:00"],p=function(e){var t=e.onChange,a=e.value;return n.createElement(i.Select,{"aria-label":"Select timezone",testId:"timezone-input",value:void 0===a?"+00:00":a,isDisabled:e.disabled,onChange:function(e){t(e.currentTarget.value)}},h.map((function(e){return n.createElement(i.Select.Option,{key:e,value:e},"UTC",e)})))},b=/(Z|[+-]\d{2}[:+]?\d{2})$/;function g(){return u().set({hours:0,minutes:0}).format("Z")}var C={root:a.css({display:"flex",alignItems:"center"}),separator:a.css({marginLeft:r.spacingM})};function D(e){var n,a,r,l=e.initialValue,u=e.usesTime,s=e.usesTimezone,c=e.uses12hClock,d=e.disabled,f=e.hasClear,h=e.onChange,b=t.useState((function(){return l})),D=b[0],E=b[1];return n=function(){h(D)},a=[D],r=t.useRef(!0),t.useEffect((function(){r.current?r.current=!1:n()}),a),t.createElement("div",{"data-test-id":"date-editor",className:C.root},t.createElement(m,{disabled:d,value:D.date,onChange:function(e){E((function(t){return o({},t,{date:e})}))}}),u&&t.createElement(t.Fragment,null,t.createElement("div",{className:C.separator}),t.createElement(v,{disabled:d,time:D.time,ampm:D.ampm,onChange:function(e){var t=e.time,n=e.ampm;E((function(e){return o({},e,{time:t,ampm:n})}))},uses12hClock:c})),s&&t.createElement(t.Fragment,null,t.createElement("div",{className:C.separator}),t.createElement(p,{disabled:d,value:D.utcOffset,onChange:function(e){E((function(t){return o({},t,{utcOffset:e})}))}})),f&&t.createElement(t.Fragment,null,t.createElement("div",{className:C.separator}),t.createElement(i.TextLink,{as:"button",isDisabled:d,testId:"date-clear",onClick:function(){E({date:void 0,time:void 0,ampm:"AM",utcOffset:g()})}},"Clear")))}function E(e){var n,a,r,i,o=e.parameters,s=null!=(n=null==o||null==(a=o.instance)?void 0:a.format)?n:"timeZ",m=null!=(r=null==o||null==(i=o.instance)?void 0:i.ampm)?r:"24",c="dateonly"!==s,d="timeZ"===s,f="12"===m;return t.createElement(l.FieldConnector,{field:e.field,isInitiallyDisabled:e.isInitiallyDisabled,throttle:0},(function(e){var n=e.value,a=e.disabled,r=e.setValue,l=e.externalReset,i=function(e){var t=e.uses12hClock,n=function(e){if(!e)return null;var t=u(e);return b.test(e)&&t.utcOffset(e),t}(e.value);return n?{date:n,time:n.format(t?"hh:mm":"HH:mm"),ampm:n.format("A"),utcOffset:n.format("Z")}:{ampm:"AM",utcOffset:g()}}({value:n,uses12hClock:f});return t.createElement(D,{initialValue:i,uses12hClock:f,usesTimezone:d,usesTime:c,disabled:a,hasClear:Boolean(n),onChange:function(e){var t=function(e){var t=e.usesTime,n=e.usesTimezone,a=function(e){if(!e.date)return{valid:null};var t=function(e){return u.utc((e.time||"00:00")+"!"+e.ampm,"HH:mm!A")}(e),n=u.parseZone(e.utcOffset,"Z").set(e.date.toObject()).set({hours:t.hours(),minutes:t.minutes()});return n.isValid()?{valid:n}:{invalid:!0,valid:null}}(e.data);return a.invalid?{invalid:!0}:{valid:null!=a&&a.valid?a.valid.format(n?"YYYY-MM-DDTHH:mmZ":t?"YYYY-MM-DDTHH:mm":"YYYY-MM-DD"):null,invalid:!1}}({data:e,usesTime:c,usesTimezone:d});t.invalid||(Boolean(n)||!n&&Boolean(t.valid))&&r(t.valid)},key:"date-container-"+l})}))}E.defaultProps={isInitiallyDisabled:!0},exports.DateEditor=E,exports.zoneOffsets=h;
//# sourceMappingURL=field-editor-date.cjs.production.min.js.map
