{"version":3,"file":"field-editor-json.esm.js","sources":["../src/JsonEditorField.tsx","../src/JsonEditorToolbar.tsx","../src/JsonInvalidStatus.tsx","../src/utils.ts","../src/JsonEditor.tsx"],"sourcesContent":["import React from 'react';\n\nimport { json } from '@codemirror/lang-json';\nimport { EditorView } from '@codemirror/view';\nimport tokens from '@contentful/f36-tokens';\nimport CodeMirror from '@uiw/react-codemirror';\nimport { css, cx } from 'emotion';\n\ntype JsonEditorFieldProps = {\n  isDisabled: boolean;\n  value: string;\n  onChange: (value: string) => void;\n};\n\nconst styles = {\n  root: css({\n    cursor: 'text',\n    padding: tokens.spacingS,\n    border: `1px solid ${tokens.gray200}`,\n    borderTop: 'none',\n    borderBottomLeftRadius: tokens.borderRadiusSmall,\n    borderBottomRightRadius: tokens.borderRadiusSmall,\n    fontSize: tokens.fontSizeM,\n    '.cm-editor': {\n      color: tokens.gray900,\n      '&.cm-focused': {\n        outline: 'none',\n      },\n    },\n    '.cm-scroller': {\n      fontFamily: tokens.fontStackMonospace,\n      minHeight: '6rem',\n    },\n    '&.disabled': {\n      cursor: 'auto',\n      '.cm-scroller ': {\n        minHeight: '6rem',\n        backgroundColor: tokens.gray100,\n        cursor: 'not-allowed',\n      },\n      '.cm-editor': {\n        border: `1px solid ${tokens.gray200}`,\n      },\n      '.cm-line': {\n        cursor: 'not-allowed',\n      },\n      '.cm-lines': {\n        cursor: 'not-allowed',\n      },\n    },\n  }),\n};\n\nexport function JsonEditorField(props: JsonEditorFieldProps) {\n  return (\n    <div\n      className={cx(styles.root, { disabled: props.isDisabled })}\n      data-test-id=\"json-editor-code-mirror\"\n    >\n      <CodeMirror\n        value={props.value}\n        onChange={props.onChange}\n        theme=\"light\"\n        extensions={[json(), EditorView.lineWrapping]}\n        basicSetup={{\n          closeBrackets: false,\n          lineNumbers: false,\n          highlightActiveLineGutter: false,\n          searchKeymap: false,\n          highlightActiveLine: false,\n          foldGutter: false,\n          bracketMatching: false,\n          syntaxHighlighting: false,\n        }}\n        width=\"100%\"\n        editable={!props.isDisabled}\n        indentWithTab={true}\n      />\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { Button } from '@contentful/f36-components';\nimport tokens from '@contentful/f36-tokens';\nimport { css } from 'emotion';\n\nconst styles = {\n  toolbar: css({\n    display: 'flex',\n    alignItems: 'center',\n    padding: tokens.spacingXs,\n    justifyContent: 'space-between',\n    backgroundColor: tokens.gray100,\n    border: `1px solid ${tokens.gray200}`,\n    borderTopLeftRadius: tokens.borderRadiusSmall,\n    borderTopRightRadius: tokens.borderRadiusSmall,\n    borderBottom: 'none',\n  }),\n  title: css({\n    fontFamily: tokens.fontStackPrimary,\n    fontSize: tokens.fontSizeM,\n    color: tokens.gray600,\n  }),\n  actions: css({\n    button: {\n      marginLeft: tokens.spacingS,\n    },\n  }),\n};\n\ntype JsonEditorToolbarProps = {\n  isUndoDisabled: boolean;\n  isRedoDisabled: boolean;\n  onRedo: () => void;\n  onUndo: () => void;\n};\n\nexport function JsonEditorToolbar(props: JsonEditorToolbarProps) {\n  return (\n    <div className={styles.toolbar}>\n      <div className={styles.title}>JSON Editor</div>\n      <div className={styles.actions}>\n        <Button\n          variant=\"secondary\"\n          size=\"small\"\n          isDisabled={props.isUndoDisabled}\n          testId=\"json-editor-undo\"\n          onClick={() => {\n            props.onUndo();\n          }}>\n          Undo\n        </Button>\n        <Button\n          variant=\"secondary\"\n          size=\"small\"\n          isDisabled={props.isRedoDisabled}\n          testId=\"json-editor-redo\"\n          onClick={() => {\n            props.onRedo();\n          }}>\n          Redo\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { css } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\nimport { ValidationMessage } from '@contentful/f36-components';\n\nexport function JsonInvalidStatus() {\n  return (\n    <div\n      role=\"status\"\n      data-test-id=\"json-editor.invalid-json\"\n      className={css({ marginTop: tokens.spacingS })}>\n      <ValidationMessage>This is not valid JSON</ValidationMessage>\n    </div>\n  );\n}\n","import { JSONObject } from './types';\n\nexport function stringifyJSON(obj: JSONObject | null | undefined): string {\n  if (obj === null || obj === undefined) {\n    return '';\n  } else {\n    return JSON.stringify(obj, null, 4);\n  }\n}\n\nexport function isValidJson(str: string) {\n  let parsed;\n  try {\n    parsed = JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  // An object or array is valid JSON\n  if (typeof parsed !== 'object') {\n    return false;\n  }\n  return true;\n}\n\nexport function parseJSON(str: string): { valid: boolean; value?: JSONObject } {\n  if (str === '') {\n    return {\n      value: undefined,\n      valid: true,\n    };\n  } else if (isValidJson(str)) {\n    return {\n      value: JSON.parse(str),\n      valid: true,\n    };\n  } else {\n    return {\n      value: undefined,\n      valid: false,\n    };\n  }\n}\n","import * as React from 'react';\n\nimport { FieldAPI, FieldConnector } from '@contentful/field-editor-shared';\nimport deepEqual from 'deep-equal';\nimport throttle from 'lodash/throttle';\n\nimport { JsonEditorField } from './JsonEditorField';\nimport { JsonEditorToolbar } from './JsonEditorToolbar';\nimport { JsonInvalidStatus } from './JsonInvalidStatus';\nimport { JSONObject } from './types';\nimport { stringifyJSON, parseJSON } from './utils';\n\nexport interface JsonEditorProps {\n  /**\n   * is the field disabled initially\n   */\n  isInitiallyDisabled: boolean;\n\n  /**\n   * sdk.field\n   */\n  field: FieldAPI;\n}\n\ntype NullableJsonObject = JSONObject | null | undefined;\n\ntype ConnectedJsonEditorProps = {\n  initialValue: NullableJsonObject;\n  setValue: (value: NullableJsonObject) => void;\n  disabled: boolean;\n};\n\ntype ConnectedJsonEditorState = {\n  value: string;\n  isValidJson: boolean;\n  undoStack: string[];\n  redoStack: string[];\n  lastUndo: string;\n};\n\nclass ConnectedJsonEditor extends React.Component<\n  ConnectedJsonEditorProps,\n  ConnectedJsonEditorState\n> {\n  static defaultProps = {\n    isInitiallyDisabled: true,\n  };\n\n  constructor(props: ConnectedJsonEditorProps) {\n    super(props);\n    this.state = {\n      value: stringifyJSON(props.initialValue),\n      isValidJson: true,\n      undoStack: [],\n      redoStack: [],\n      lastUndo: '',\n    };\n  }\n\n  setValidJson = (value: boolean) => {\n    this.setState({\n      isValidJson: value,\n    });\n  };\n\n  pushUndo = throttle((value: string) => {\n    this.setState((state) => ({\n      undoStack: [...state.undoStack, value],\n    }));\n  }, 400);\n\n  onChange = (value: string) => {\n    const parsed = parseJSON(value);\n\n    if (value !== this.state.lastUndo) {\n      this.pushUndo(this.state.value);\n    }\n\n    this.setState({\n      value,\n      isValidJson: parsed.valid,\n    });\n\n    if (parsed.valid) {\n      this.props.setValue(parsed.value);\n    }\n  };\n\n  onUndo = () => {\n    const undoStack = this.state.undoStack;\n\n    if (undoStack.length === 0) {\n      return;\n    }\n\n    const value = undoStack.pop() || '';\n\n    const parsedValue = parseJSON(value);\n\n    this.setState(\n      (state) => ({\n        ...state,\n        value,\n        isValidJson: parsedValue.valid,\n        undoStack,\n        redoStack: [...state.redoStack, state.value],\n        lastUndo: value,\n      }),\n      () => {\n        if (parsedValue.valid) {\n          this.props.setValue(parsedValue.value);\n        }\n      }\n    );\n  };\n\n  onRedo = () => {\n    const redoStack = [...this.state.redoStack];\n\n    if (redoStack.length === 0) {\n      return;\n    }\n\n    const value = redoStack.pop() || '';\n\n    const parsedValue = parseJSON(value);\n\n    this.setState(\n      (state) => ({\n        ...state,\n        value,\n        isValidJson: parsedValue.valid,\n        redoStack,\n        undoStack: [...state.undoStack, state.value],\n      }),\n      () => {\n        if (parsedValue.valid) {\n          this.props.setValue(parsedValue.value);\n        }\n      }\n    );\n  };\n\n  render() {\n    return (\n      <div data-test-id=\"json-editor\">\n        <JsonEditorToolbar\n          isRedoDisabled={this.props.disabled || this.state.redoStack.length === 0}\n          isUndoDisabled={this.props.disabled || this.state.undoStack.length === 0}\n          onUndo={this.onUndo}\n          onRedo={this.onRedo}\n        />\n        <JsonEditorField\n          value={this.state.value}\n          onChange={this.onChange}\n          isDisabled={this.props.disabled}\n        />\n        {!this.state.isValidJson && <JsonInvalidStatus />}\n      </div>\n    );\n  }\n}\n\nexport default function JsonEditor(props: JsonEditorProps) {\n  return (\n    <FieldConnector<JSONObject>\n      field={props.field}\n      isInitiallyDisabled={props.isInitiallyDisabled}\n      isEqualValues={(value1, value2) => {\n        return deepEqual(value1, value2);\n      }}>\n      {({ value, disabled, setValue, externalReset }) => {\n        return (\n          <ConnectedJsonEditor\n            // on external change reset component completely and init with initial value again\n            key={`json-editor-${externalReset}`}\n            initialValue={value}\n            disabled={disabled}\n            setValue={setValue}\n          />\n        );\n      }}\n    </FieldConnector>\n  );\n}\n"],"names":["styles","root","css","cursor","padding","tokens","spacingS","border","gray200","borderTop","borderBottomLeftRadius","borderRadiusSmall","borderBottomRightRadius","fontSize","fontSizeM","color","gray900","outline","fontFamily","fontStackMonospace","minHeight","backgroundColor","gray100","JsonEditorField","props","React","className","cx","disabled","isDisabled","CodeMirror","value","onChange","theme","extensions","json","EditorView","lineWrapping","basicSetup","closeBrackets","lineNumbers","highlightActiveLineGutter","searchKeymap","highlightActiveLine","foldGutter","bracketMatching","syntaxHighlighting","width","editable","indentWithTab","toolbar","display","alignItems","spacingXs","justifyContent","borderTopLeftRadius","borderTopRightRadius","borderBottom","title","fontStackPrimary","gray600","actions","button","marginLeft","JsonEditorToolbar","Button","variant","size","isUndoDisabled","testId","onClick","onUndo","isRedoDisabled","onRedo","JsonInvalidStatus","role","marginTop","ValidationMessage","stringifyJSON","obj","undefined","JSON","stringify","isValidJson","str","parsed","parse","e","parseJSON","valid","ConnectedJsonEditor","setValidJson","setState","pushUndo","throttle","state","undoStack","lastUndo","setValue","length","pop","parsedValue","redoStack","initialValue","render","defaultProps","isInitiallyDisabled","JsonEditor","FieldConnector","field","isEqualValues","value1","value2","deepEqual","externalReset","key"],"mappings":"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"}