"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("react")),n=require("@contentful/field-editor-shared"),r=require("emotion"),i=e(require("@contentful/f36-tokens")),a=require("@contentful/f36-components"),o=require("@contentful/f36-icons");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=r.css({padding:0,wordWrap:"break-word",marginTop:i.spacingS,color:i.red500,listStyleType:"none"}),s=r.css({display:"inline-flex",flexDirection:"column",marginLeft:i.spacingXs}),u=r.css({display:"flex",alignItems:"center"}),f=r.css({fontWeight:Number(i.fontWeightDemiBold)});function d(e){var r=t.useState({loading:!0,entries:[]}),i=r[0],s=r[1],u=t.useMemo((function(){return e.space.getCachedContentTypes().reduce((function(e,t){var n;return l({},e,((n={})[t.sys.id]=t,n))}),{})}),[e.space]),d=t.useCallback((function(t){return n.entityHelpers.getEntryTitle({entry:t,defaultTitle:"Untitled",localeCode:e.localeCode,defaultLocaleCode:e.defaultLocaleCode,contentType:u[t.sys.contentType.sys.id]})}),[e.localeCode,e.defaultLocaleCode,u]),m=[];return"conflicting"in e.error&&(m=e.error.conflicting),t.useEffect((function(){var t=i.entries.map((function(e){return e.id})),n=m.map((function(e){return e.sys.id}));if(!n.every((function(e){return t.includes(e)}))){s((function(e){return l({},e,{loading:!0})}));var r={"sys.id[in]":n.join(",")};e.space.getEntries(r).then((function(t){var n=t.items.map((function(t){return{id:t.sys.id,title:d(t),href:e.getEntryURL(t)}}));s({loading:!1,entries:n})}))}}),[d,i.entries,m,e.space.getEntries,e.getEntryURL]),t.createElement(a.List,{className:c,testId:"validation-errors-uniqueness"},t.createElement(a.ListItem,{className:f},i.loading?t.createElement("div",null,"Loading title for conflicting entryâ€¦"):i.entries.map((function(e){return t.createElement(a.TextLink,{key:e.id,href:e.href,icon:t.createElement(o.ExternalLinkIcon,null),alignIcon:"end",variant:"negative",target:"_blank",rel:"noopener noreferrer"},e.title)}))))}exports.ValidationErrors=function(e){var n=t.useState([]),r=n[0],i=n[1];return t.useEffect((function(){return e.field.onSchemaErrorsChanged((function(e){i(e||[])}))}),[e.field]),0===r.length?null:t.createElement(a.List,{className:c,testId:"validation-errors"},r.map((function(n,r){return t.createElement("li",{key:r,role:"status","aria-roledescription":"field-locale-schema","data-error-code":"entry.schema."+n.name,className:u},t.createElement(o.InfoCircleIcon,{variant:"negative"}),t.createElement("div",{className:s},n.message,"unique"===n.name&&t.createElement(d,{error:n,space:e.space,localeCode:e.field.locale,defaultLocaleCode:e.locales.default,getEntryURL:e.getEntryURL})))})))};
//# sourceMappingURL=field-editor-validation-errors.cjs.production.min.js.map
